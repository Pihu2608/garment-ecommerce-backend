<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Track Order | ClassyCrafth</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Segoe UI,Arial,sans-serif}
body{margin:0;background:#f5f6f8;color:#222}

.header{
  background:#111;color:#fff;padding:18px 8%;font-size:20px;font-weight:bold
}

.track-box{
  max-width:720px;margin:40px auto;background:#fff;
  padding:30px;border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08)
}

.track-box h2{margin-bottom:10px}
.track-box p{color:#666;margin-bottom:20px}

.input-row{display:flex;gap:10px}
.input-row input{
  flex:1;padding:12px;border-radius:8px;border:1px solid #ddd;font-size:15px
}
.input-row button{
  padding:12px 20px;border:none;border-radius:8px;
  background:#111;color:#fff;font-size:14px;cursor:pointer
}

.status-badge{
  display:inline-block;padding:6px 14px;border-radius:20px;
  font-size:12px;font-weight:bold;margin-top:10px
}

.PAID{background:#e8fff0;color:#0a8f4c}
.ORDER_PLACED{background:#eef3ff;color:#2f55ff}
.SHIPPED{background:#fff4e5;color:#d47b00}
.OUT_FOR_DELIVERY{background:#ffecec;color:#d63031}
.DELIVERED{background:#e8fff0;color:#0a8f4c}

.card{
  background:#fafafa;padding:15px;border-radius:12px;margin-top:20px
}

.timeline{
  margin-top:20px;border-left:3px solid #111;padding-left:20px
}
.timeline-item{margin-bottom:18px}
.timeline-item h4{margin:0;font-size:15px}
.timeline-item span{font-size:12px;color:#777}

.hidden{display:none}
</style>
</head>

<body>

<div class="header">ðŸ“¦ ClassyCrafth â€“ Track Your Order</div>

<div class="track-box">
  <h2>Track your order</h2>
  <p>Enter your Order ID to see delivery status</p>

  <div class="input-row">
    <input id="oid" placeholder="Enter Order ID">
    <button onclick="track()">Track</button>
  </div>

  <div id="result" class="hidden">
    <h3 style="margin-top:25px">Order Status</h3>
    <span id="badge" class="status-badge"></span>

    <div class="card">
      <p><b>Customer:</b> <span id="name"></span></p>
      <p><b>Courier:</b> <span id="courier"></span></p>
      <p><b>Tracking No:</b> <span id="trackno"></span></p>
    </div>

    <h3 style="margin-top:25px">Delivery Timeline</h3>
    <div id="timeline" class="timeline"></div>
  </div>
</div>

<script>
async function track(){
  const id = document.getElementById("oid").value.trim();
  if(!id) return alert("Enter Order ID");

  const res = await fetch(`https://api.classycrafth.com/api/orders/track/${id}`);
  const data = await res.json();

  if(!data.success) return alert("Order not found");

  const o = data.order;

  document.getElementById("result").classList.remove("hidden");

  document.getElementById("badge").innerText = o.trackingStatus;
  document.getElementById("badge").className = "status-badge " + o.trackingStatus;

  document.getElementById("name").innerText = o.customerName || "-";
  document.getElementById("courier").innerText = o.courierName || "-";
  document.getElementById("trackno").innerText = o.trackingNumber || "-";

  document.getElementById("timeline").innerHTML =
    o.statusHistory.map(s => `
      <div class="timeline-item">
        <h4>${s.status}</h4>
        <span>${new Date(s.time).toLocaleString()}</span>
      </div>
    `).reverse().join("");
}
</script>

</body>
</html>
